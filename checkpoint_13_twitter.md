## EJEMPLO TWITTER

### Diagrama de casos de usos

Ahora, cada uno de los videos de soluciones de este curso se dividirá en su propia guía individual. La razón es que hay algunos objetivos que quiero lograr con las soluciones. Definitivamente, una es para que puedas tener algo que comparar con lo que ya has armado en tu propio proyecto. Entonces, poder verificar y ver si lo que construyeron es similar a lo que tenemos aquí.

La otra razón, sin embargo, es porque cuando estás en la industria y trabajas en tus propios proyectos de desarrollo del mundo real, quiero darte guías a las que puedas consultar. Por ejemplo, hablaremos de un diagrama de casos de uso en esta guía. Por eso, en sus proyectos futuros, es posible que desee volver y ver cuál es la sintaxis y la estructura correctas para un diagrama de casos de uso. De modo que puede volver y mirar una guía en lugar de tener que revisar varias. Dicho todo esto, pasemos a esta primera solución en la que analizamos un diagrama de casos de uso para crear la funcionalidad de Twitter.

![diagrama casos de uso twitter](./images/diagramas%20ejemplos/twitter/uc%20solution.png)


Aquí tenemos dos actores. Tenemos un autor y tenemos un seguidor. Puedes pensar en un autor como alguien que escribe un tweet.

Ahora, recuerda, tu solución no tiene que coincidir con todos los elementos que tengo porque quiero que puedas usar parte de tu propia creatividad y no quería encerrarte en un conjunto de requisitos en los que no estabas. No puedo explorar cómo sería su propia solución. Aquí, sin embargo, tenemos dos actores, porque queremos tener a alguien que escriba tweets, y luego tendremos a alguien que pueda seguirlos. Ese es uno de los tipos de funciones fundamentales más importantes que Twitter pone a disposición.

Entonces, veamos lo que un autor puede hacer en este diagrama de casos de uso. Pueden escribir un tweet. Como puede ver, tenemos este caso de uso "Escribir un tweet" y dentro de "Escribir un tweet" hay una serie de elementos que esto incluye. Escribir un tweet podría ser algo en lo que escriben un tweet desde cero. Sin embargo, también podrán retuitear un tweet. También les puede gustar un tweet y también pueden enviar un mensaje. Esto sería como reenviar un tweet. Estas son algunas de las funciones incluidas en el caso de uso "Escribir un tweet".

Ahora, también podemos acceder a la posibilidad de tener una extensión en este tweet. Si ha usado Twitter, sabrá que puede escribir un tweet normal que solo tenga algo de contenido de texto, pero también puede cargar una imagen en el tweet y compartirla. Por eso tenemos una metaclase de <<extend>>. Está ampliando la funcionalidad del tweet donde puedes adjuntar una imagen a una publicación.

También tenemos a este actor seguidor. Entonces, lo que tenemos que hacer al modelar este diagrama de casos de uso es construir el tipo de funcionalidad donde queremos poder mostrar lo que hace un actor, y luego también los tipos de casos de uso y el tipo de funcionalidad que uno de los otros actores van a tener. Y entonces en este caso veamos qué puede hacer un seguidor.

Un seguidor puede escribir un tweet, puede retuitear un tweet, darle me gusta a un tweet y enviar mensajes. Ahora bien, técnicamente este es un tipo de caso de uso muy básico, porque un autor y un seguidor son técnicamente intercambiables. Si sigues a otro usuario, sigues siendo un autor. Cada usuario de Twitter es un autor y esa es la razón por la que la funcionalidad que tienes como autor se extiende a cada uno de los casos de uso.

La razón por la que es importante tener este actor secundario aquí es porque necesitamos poder ver a qué tiene acceso un seguidor. Imagine un escenario en el que no estamos reconstruyendo Twitter sino, por ejemplo, Wikipedia, donde diferentes usuarios también pueden editar publicaciones. Entonces, no solo podrían escribir su propia publicación, sino que también podrían editarla. Y entonces tendrías otra funcionalidad para el actor de tipo secundario. Ahora, Twitter no tiene esa funcionalidad, por lo que no la incorporamos, pero es por eso que es importante incluir a todos los diversos actores que interactuarán con un caso de uso específico.

Ahora bien, cuando estaba aprendiendo sobre UML por primera vez, normalmente me encontraba con un par de problemas. Una es que haría un sistema demasiado complejo, donde entraría y tomaría un proceso muy simple y luego construiría demasiados actores, demasiados casos de uso, demasiadas extensiones, demasiadas inclusiones, y el El sistema sería muy difícil de leer. Y también hubo momentos en los que simplificaba demasiado las cosas y no tenía los tipos correctos de conexiones.

Una cosa que quiero que hagas es que puedas aprender de esta solución. Si caes en uno de esos campos en los que haces algo demasiado complejo o algo demasiado simple, no te preocupes, así fue exactamente como lo hice yo. La única manera de aprender a crear un diagrama eficaz es mediante prueba y error y siendo capaz de resolver los problemas hasta encontrar el equilibrio adecuado. Recuerde, el objetivo, y esto es lo que me ayuda ahora a crearlos, es poder pensar en la funcionalidad principal que necesita la aplicación. Esto influye un poco en la experiencia del usuario, pero también en cómo debe estructurarse el código. Entonces, el objetivo de esto es, si le entregara esto a un desarrollador, o si lo tomara y escribiera el sistema yo mismo, quiero construirlo de manera que pueda ver este diagrama de casos de uso y En sólo unos minutos podré tomar esto y luego comenzar a construir un marco en mi mente sobre cómo se debe modelar el sistema.

Buen trabajo al repasar la parte del diagrama de casos de uso de este proyecto y en la próxima guía profundizaremos en el diagrama de clases.

### Diagrama de clases

Ahora, esto se verá muy similar a lo que implementamos en el curso de capacitación de UML si pasó por eso, pero hice una serie de modificaciones. Y la razón principal es que no quería darles la respuesta completa al proyecto, por lo que esta es una versión ligeramente modificada que tiene todos los mismos nombres de clase, pero hice algunos cambios que personalmente usaría en un proyecto si Me encargaron la creación de Twitter.

![diagrama casos de clases twitter](./images/diagramas%20ejemplos/twitter/diagrama%20clases%20solution.png)

Ahora hay mucho contenido aquí. Este es definitivamente uno de los diagramas de clases más grandes que verá en todo este curso, pero es una excelente capacitación porque es un tipo de configuración bastante estándar para crear una aplicación. Hay algunos componentes importantes aquí que quiero señalar. También hay algunos elementos opcionales aquí que quiero que tengan en cuenta porque habrá muchas ocasiones en las que una organización tendrá su propia versión de UML. Tienen su propio tipo de sintaxis y su propia forma de hacer las cosas. Y eso está perfectamente bien. Escribo mi propio UML ligeramente diferente al de cualquier otro desarrollador que haya conocido. Siempre habrá ligeros cambios. Entonces, lo que quiero hacer es señalar cuáles son los elementos estándar y luego mostrarles por qué he tomado algunas de mis propias decisiones creativas, porque funcionan para mí.

Comencemos con la clase de tweets.

Ahora no voy a repasar todos los atributos de cada una de las clases. Como mencioné en el video de instrucciones, esto es algo que dejo en tus manos en base a lo que descubriste personalmente cuando investigaste Twitter. Pero solo para este mencionaremos que hay elementos como un ID, texto para el tweet, una referencia de quién es el autor, si fue retuiteado o no, cuándo fue creado y diferentes elementos por el estilo. Puede notar que no tengo los tipos de datos para cada uno de estos. Por lo general, solo pongo el tipo de datos cuando siento que es uno personalizado que realmente necesita alguna explicación adicional. Por ejemplo, sé que textva a ser del tipo texto varcharalgo así. Poder agregar eso realmente no hace que el proceso de desarrollo sea más eficiente. Por eso no me gusta perder tiempo en cosas que no tienen ningún beneficio real. Y ese es sólo un ejemplo y lo verá a lo largo de todo este curso.

Y esa es una razón por la cual si le preguntas a 10 desarrolladores e ingenieros de software con experiencia en el uso de UML y les asignas este proyecto, obtendrás diez variaciones diferentes de ese proyecto. Esa es una de las razones por las que quiero mostrarte cuáles son algunos de esos tipos de variaciones, porque cuando vas a trabajar vas a experimentar eso, y no quiero que pienses que sólo hay una manera correcta de hacer las cosas. .

Dicho todo esto, hay algunos elementos que realmente deben estar dentro de cada diagrama de clases, así que nos centraremos en ellos. Uno de los más comunes es poder demostrar multiplicidad. Recuerde, la multiplicidad es la práctica de poder mostrar cómo se va a definir una asociación. Entonces nuestro tweet tiene el potencial de tener muchos "me gusta". Si vas a Twitter y miras un tweet, verás que tiene la capacidad de que varias personas hayan dado me gusta a ese tweet. En nuestro diagrama pueden ver que un tweet tiene muchos Me gusta y la forma en que eso se define es con la flecha de asociación, y tenemos "1" seguido de una estrella. Lo que eso significa es que un tweet tiene la capacidad de tener muchos "me gusta".

Ahora bien, hay muchos elementos de un diagrama de clases que son opcionales. Sin embargo, la única parte que voy a enfatizar es asegurarme de que las multiplicidades sean correctas. La razón de esto es que si me entregaras un diagrama UML y me dijeras: "Crea una base de datos completa basada en este diagrama", si los elementos de multiplicidad UML como este están configurados correctamente, me resultará muy fácil. ir y construir todos esos modelos, porque voy a saber que cada me gusta tendrá que tener una referencia al tweet. Entonces esa será una relación de clave externa allí mismo. Si esto se configura incorrectamente, lo que sucederá es que causará más problemas a los desarrolladores. Lo construirán y luego se darán cuenta de que tenían que tener una clave externa dentro de Me gusta. Entonces, si le estás pasando esto a otro desarrollador, no le agradarás mucho si no configuras ese componente porque estás creando más trabajo para él.

Ahora, recuerde, dentro de cualquier tipo de diagrama de clases, tiene el nombre, seguido de los atributos, seguido de cualquier operación. Normalmente, en mi propio enfoque, no dedico mucho tiempo a agregar los nombres de las operaciones. Y la razón de esto es que, según mi experiencia, crea una gran cantidad de trabajo repetitivo; en otras palabras, si estoy construyendo a new(), a create(), an edit()y an update()action dentro de una clase, entonces ya lo sé como desarrollador que voy a agregarlos. Sería una pérdida de tiempo agregarlos en esta etapa. Por lo general, solo incluyo algunas de las operaciones que pueden ser ligeramente diferentes a las estándar, solo para que yo o el desarrollador que estoy entregando esto tenga una idea de algunos de esos componentes personalizados.

Pero una cosa que sí creo que es muy importante es enumerar los atributos correctos, porque lo que haré como desarrollador es que, cuando tome un diagrama de clases, generaré mis modelos basados ​​específicamente en esta lista. Así que crearé un modelo de tweet que automáticamente tendría una identificación, pero diría que necesita un texto, una referencia del autor, una referencia de retweet, un creado, un me gusta, un hashtag, etc., etc. Y así es. algo que literalmente copiaría y pegaría esos elementos y esos nombres en mis propios generadores. Por eso dedico más tiempo a pensar en la forma correcta de configurar estos atributos y menos en este tipo de métodos.

Entonces eso es tuitear y dar me gusta. No vamos a repasar cada uno de estos elementos porque notarás que hay algunos tipos de componentes increíblemente similares, así que quiero centrarme en lo que los hace diferentes. Y luego siempre podrá consultar el archivo maestro si tiene alguna pregunta sobre cualquiera de los otros componentes.

Ahora bien, uno de los tipos de sintaxis que uso y que es diferente a la especificación UML es para unir tablas. Entonces, si miramos, digamos, la tabla TweetHashtag o la clase Retweet, lo que son es... no son tantas clases. Dependiendo de su lenguaje de programación, pueden llamarse clases, pero lo que realmente son son tablas de unión. Entonces, en este caso, un tweet se une a una clase de hashtag a través de esta tabla de unión. Y la razón por la que me gusta usar esta sintaxis de línea de puntos es porque UML es visual y ese es el objetivo del lenguaje. Entonces, si estoy mirando un diagrama de clases, me gusta poder saber dónde están mis clases, como tweet, me gusta, imagen o hashtag, y me gusta que haya algún tipo de distinción visual clara entre esas clases y las tablas de bases de datos que unen esas clases.

En otras palabras, TweetHashtag no va a tener ninguna operación. No va a tener un conjunto de métodos. Lo único que hace es permitirme tener navegabilidad entre un tweet y un hashtag. Si recuerdas qué es la navegabilidad, me permite buscar un tweet y luego ejecutar un método que consulta todos los hashtags. Eso es lo que la clase TweetHashtag me permite hacer. Y cada vez que diseño un sistema, si sé dónde están las tablas de unión, sé que eso me ayudará a tomar varias decisiones.

Una de las primeras y más importantes decisiones es que me dirá que no puedo crear esta clase en esta tabla de base de datos hasta que se hayan creado la clase tweet y la clase hashtag. Puede que no parezca gran cosa, sin embargo, en realidad lo es, porque me dice el orden en el que necesito construir cada uno de estos modelos y sé que tendré que crear una clase de tweet antes de poder hacerlo. Haz este TweetHashtag solo porque tiene que tener una referencia a un tweet y a un hashtag. Esa es definitivamente una razón clave, pero también es útil comprender que la funcionalidad dentro de este tipo de elementos será mínima. Simplemente es una manera de unirnos a clases.

Ahora, para un tweet para retuitear, este es un poco diferente porque es lo que se llama una tabla autorreferencial. Lo que estamos haciendo es que no queremos crear una clase completa para retweets porque, si lo piensas bien, un retweet es simplemente un tweet. Entonces esto podría ser algo, si realmente te gusta usar la herencia, podrías hacer algo donde retuitear sea un tipo de tweet, y eso podría darte acceso a él. Pero en el caso de la forma en que normalmente construyo sistemas, simplemente haría de esto una tabla de unión que pueda hacer referencia a sí misma para saber qué objetos son tweets y cuáles son retweets, simplemente basándome en lo que hay dentro de esta tabla de unión.

Y observe cómo esto tiene una referencia a retuiteado, es decir, qué elemento se retuiteó, junto con el nuevo tweet que se creó. Entonces, en otras palabras, para tomar un ejemplo práctico, si estoy siguiendo a un amigo, veo que hace una publicación y hago clic en el pequeño botón de retweet, entonces se generará un nuevo registro de retweet en la base de datos que tendrá una referencia a mi tweet junto con la fuente que fue retuiteada. Y otra opción que podría haber agregado aquí es "contenido", porque Twitter en años posteriores dio la posibilidad no solo de retuitear sino también de agregar notas asociadas con él.

Otra ventaja de usar tablas de unión es que no solo están ahí para realizar un seguimiento de los ID, sino que también pueden realizar un seguimiento del contenido adicional que los reúne.

Hay otro elemento en el que quiero centrarme y es el "seguimiento".

Entonces tenemos nuestra clase de usuario. Es bastante básico. Toma una identificación, nombre, zona horaria, ciudad y luego algunas configuraciones de seguridad, y luego tiene el siguiente elemento. Ahora bien, esto es algo muy complicado para los desarrolladores junior, por lo que ser capaz de comprender la forma en que funciona le ayudará mucho a la hora de salir y conseguir un trabajo o incorporar este tipo de funcionalidad en su sistema. . Y esto no es sólo para las redes sociales. Definitivamente es algo que necesitarás usar si estás creando una red social, pero al final del día hay muy pocas aplicaciones, especialmente aplicaciones de gran producción, que no tengan que tener este tipo de autorreferencial. establecido de una forma u otra.

Podemos ver que tenemos nuestra siguiente tabla de unión y tenemos usuarios. Entonces, la parte complicada aquí es que tenemos un usuario que necesita poder seguir a otro usuario. ¿Pero cómo se hace un seguimiento de eso? Tener este tipo de mesa de unión es una excelente manera de hacerlo. Entonces, si tiene el Usuario A que quiere seguir al Usuario B, entonces lo que puede hacer es crear esta tabla de base de datos y poder decir, este siguiente usuario es donde almacenaremos la ID de quién está siendo seguido. Y luego tenemos seguidor. Entonces vamos a almacenar la identificación de usuario de la persona que realiza la siguiente acción. Y lo bueno de esto es que, debido a que tenemos esta referencia aquí mismo, y un usuario tiene muchos seguidores, y después tiene muchos usuarios, podemos ejecutar consultas limpias de la base de datos para realizar acciones, como poder representar una lista de todos los usuarios que un usuario está siguiendo.

Y también podrás realizar tareas como crear un feed. Si alguna vez te has preguntado cómo, cuando estás en Twitter y tienes todos estos tweets provenientes de personas a las que sigues, se logra usando este tipo de configuración. Y lo que se llama es una tabla autorreferencial. Aviso, no uniremos elementos. Si nunca ha implementado esto antes, definitivamente le recomiendo que investigue el concepto de tablas autorreferenciales, pero luego también lo implemente en código y pueda aprender cómo funciona. Esto será algo que probablemente tendrás que implementar en algún momento.

Estos son algunos de los elementos clave que se incluyen en esta solución. Definitivamente recomiendo que explores el archivo fuente completo y puedas ver la forma en que lo implementé. Y como cualquier otra solución en este proyecto, la tuya será diferente a la mía. Debe tener los mismos componentes principales, debe tener la lista completa de nombres de clases y, en este caso, una de las cosas más importantes es realmente concentrarse cuando analiza esto y lo compara con su solución, concéntrese en estas multiplicidades. Concéntrese en ellos para asegurarse de que tiene la tabla configurada correctamente, de modo que sepa qué tabla y qué clase tiene muchos de otro elemento, y cuándo tiene elementos, como cuando una clase pertenece a otra clase.

Recuerde el objetivo de todo este curso: brindarle la capacidad de resolver problemas. Cuando tienes la tarea de crear una aplicación, y especialmente si es un tipo de aplicación no trivial, puede ser algo muy aterrador si intentas saltar al código de inmediato. Lo que este curso pretende hacer es brindarle un paso intermedio para que pueda decir, demos un paso atrás y modelemos el sistema para que podamos entender lo que necesitamos construir. Porque cuanto más pequeños sean los fragmentos en los que puedas dividir un problema, más fácil empezará a volverse. Entonces, al crear un diagrama de clases estructurado adecuadamente, lo que podrá hacer es tomar este diagrama y convertirlo instantáneamente en código, podrá construir su base de datos completa basándose en todo. que pones dentro de este diagrama.